import * as React from "react"
import { Frame, addPropertyControls, ControlType } from "framer"
import twemoji from "twemoji"

// Component
export function Twemoji({ search }) {
    let emoji = search

    if (!search || search.length > 2) {
        emoji = "⭐️"
    }

    return (
        <Frame style={style}>
            <img src={parse(emoji)} style={{ width: "100%", height: "100%" }} />
        </Frame>
    )
}

// Default Props
Twemoji.defaultProps = {
    width: 100,
    height: 100,
    search: "⭐️",
}

// Property Controls
addPropertyControls(Twemoji, {
    search: {
        type: ControlType.String,
        title: "Search",
        placeholder: "Paste Emoji…",
    },
})

// Twemoji Parsing
function parse(string) {
    let div = document.createElement("div")
    div.textContent = string
    twemoji.parse(div, { ext: ".svg", folder: "svg" })
    return div.querySelector("img").src
}

// CSS Styles
const style: React.CSSProperties = {
    height: "100%",
    width: "100%",
    display: "flex",
    placeItems: "center",
    placeContent: "center",
    textAlign: "center",
    backgroundColor: "transparent",
}
